<!doctype html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HortiSystem â€” Cadastrar FuncionÃ¡rio</title>
    

    <!-- HortiSystem Tema Moderno (global) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/horti-modern.css">

</head>
<body>
<div class="shell">
    <header class="topbar">
        <div class="brand"><div style="width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center">HS</div><div style="font-weight:800">HortiSystem</div></div>
        <nav style="display:flex;gap:8px"><a href="/" style="color:var(--muted);text-decoration:none">ğŸ  InÃ­cio</a><a href="/funcionarios/lista" style="color:var(--muted);text-decoration:none">ğŸ“‹ FuncionÃ¡rios</a></nav>
    </header>

    <main class="card">
        <h1>ğŸ‘¥ Cadastrar Novo FuncionÃ¡rio</h1>

        <div th:if="${success}" class="alert alert-success">âœ… <span th:text="${success}"></span></div>
        <div th:if="${error}" class="alert alert-error">âš ï¸ <span th:text="${error}"></span>
            <div class="field-info" th:if="${error.contains('CPF')}">Dica: Use apenas nÃºmeros no CPF (11 dÃ­gitos)</div>
            <div class="field-info" th:if="${error.contains('Email')}">Dica: O email deve conter @</div>
            <div class="field-info" th:if="${error.contains('Telefone')}">Dica: Telefone deve ter pelo menos 10 dÃ­gitos</div>
        </div>

        <form th:action="@{/funcionarios}" method="post" th:object="${funcionario}">
            <div class="form-row">
                <div>
                    <label for="nome">Nome Completo</label>
                    <input type="text" id="nome" th:field="*{nome}" required minlength="2" placeholder="Ex: JoÃ£o Silva">
                    <div class="field-info">MÃ­nimo 2 caracteres</div>
                </div>

                <div>
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" th:field="*{cpf}" required placeholder="000.000.000-00" maxlength="14">
                    <div class="field-info">Formato: 000.000.000-00</div>
                </div>
            </div>

            <div class="form-row">
                <div>
                    <label for="telefone">Telefone</label>
                    <input type="tel" id="telefone" th:field="*{telefone}" required placeholder="(11) 99999-9999">
                    <div class="field-info">Com DDD</div>
                </div>

                <div>
                    <label for="email">Email</label>
                    <input type="email" id="email" th:field="*{email}" required placeholder="funcionario@hortisystem.com">
                </div>
            </div>

            <div class="form-row">
                <div>
                    <label for="cargo">Cargo</label>
                    <select id="cargo" th:field="*{cargo}" required>
                        <option value="">Selecione o cargo</option>
                        <option value="GERENTE">Gerente</option>
                        <option value="VENDEDOR">Vendedor</option>
                        <option value="ESTOQUISTA">Estoquista</option>
                        <option value="CAIXA">Caixa</option>
                    </select>
                </div>

                <div>
                    <label for="salario">SalÃ¡rio (R$)</label>
                    <input type="number" id="salario" th:field="*{salario}" min="0" step="0.01" placeholder="0.00">
                    <div class="field-info">Ex: 2500.00</div>
                </div>
            </div>

            <div style="margin-top:8px">
                <label for="dataAdmissao">Data de AdmissÃ£o</label>
                <input type="date" id="dataAdmissao" th:field="*{dataAdmissao}">
                <div class="field-info">Data atual ou futura (para testes)</div>
            </div>

            <div class="actions">
                <button type="submit" class="btn btn-primary">ğŸ’¾ Cadastrar FuncionÃ¡rio</button>
                <button type="reset" class="btn btn-secondary">ğŸ”„ Limpar</button>
            </div>
        </form>

        <div style="margin-top:14px;border-top:1px solid rgba(255,255,255,0.03);padding-top:12px;color:var(--muted)">
            <a th:href="@{/funcionarios/lista}" style="color:var(--muted);text-decoration:none;margin-right:12px">ğŸ“‹ Ver Lista de FuncionÃ¡rios</a>
            <a th:href="@{/produto/novo}" style="color:var(--muted);text-decoration:none;margin-right:12px">ğŸ“¦ Cadastrar Produto</a>
            <a th:href="@{/vendas}" style="color:var(--muted);text-decoration:none">ğŸ’° Ir para Vendas</a>
        </div>
    </main>

    <footer>Â© <span th:text="${T(java.time.Year).now()}"/> HortiSystem</footer>
</div>

<script>
    (function(){
      var cpf = document.getElementById('cpf');
      if(cpf){
        cpf.addEventListener('input', function(e){
          var v = e.target.value.replace(/\D/g,'');
          v = v.replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d{1,2})$/,'$1-$2');
          e.target.value = v;
        });
      }
      var tel = document.getElementById('telefone');
      if(tel){
        tel.addEventListener('input', function(e){
          var v = e.target.value.replace(/\D/g,'');
          if(v.length<=11){
            if(v.length<=10){ v = v.replace(/(\d{2})(\d)/,'($1) $2').replace(/(\d{4})(\d)/,'$1-$2'); }
            else{ v = v.replace(/(\d{2})(\d)/,'($1) $2').replace(/(\d{5})(\d)/,'$1-$2'); }
            e.target.value = v;
          }
        });
      }
    })();
</script>
</body>
</html>
